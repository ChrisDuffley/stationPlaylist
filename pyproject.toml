[tool.ruff]
line-length = 110

builtins = [
	# translation lookup
	"_",
	# translation lookup
	"ngettext",
	# translation lookup
	"pgettext",
	# translation lookup
	"npgettext",
]

include = [
	"*.py",
	"sconstruct",
]

exclude = [
	".git",
	"__pycache__",
]

[tool.ruff.format]
indent-style = "tab"

[tool.ruff.lint.mccabe]
max-complexity = 15

[tool.ruff.lint]
ignore = [
	# indentation contains tabs
	"W191",
]

[tool.ruff.lint.per-file-ignores]
# sconstruct contains many inbuilt functions not recognised by the lint,
# so ignore F821.
"sconstruct" = ["F821"]

[tool.pyright]
pythonPlatform = "Windows"
typeCheckingMode = "strict"

include = [
	"**/*.py",
]

exclude = [
	"sconstruct",
	".git",
	"__pycache__",
	# When excluding concrete paths relative to a directory,
	# not matching multiple folders by name e.g. `__pycache__`,
	# paths are relative to the configuration file.
]

# Tell pyright where to load python code from
extraPaths = [
	"./addon",
]

# General config
analyzeUnannotatedFunctions = true
deprecateTypingAliases = true

# Stricter typing
strictParameterNoneValue = true
strictListInference = true
strictDictionaryInference = true
strictSetInference = true

# Compliant rules
reportAbstractUsage = true
reportAssertAlwaysTrue = true
reportAssertTypeFailure = true
reportConstantRedefinition = true
reportDuplicateImport = true
reportFunctionMemberAccess = true
reportGeneralTypeIssues = true
reportIncompatibleMethodOverride = true
reportIncompleteStub = true
reportInconsistentConstructor = true
reportInconsistentOverload = true
reportInvalidStringEscapeSequence = true
reportInvalidStubStatement = true
reportInvalidTypeArguments = true
reportInvalidTypeForm = true
reportInvalidTypeVarUse = true
reportMatchNotExhaustive = true
reportMissingModuleSource = true
reportMissingSuperCall = true
reportNoOverloadImplementation = true
reportOptionalCall = true
reportOptionalContextManager = true
reportOptionalIterable = true
reportOverlappingOverload = true
reportPrivateImportUsage = true
reportPropertyTypeMismatch = true
reportRedeclaration = true
reportReturnType = true
reportSelfClsParameterName = true
reportShadowedImports = true
reportTypeCommentUsage = true
reportTypedDictNotRequiredAccess = true
reportUnboundVariable = true
reportUnhashable = true
reportUninitializedInstanceVariable = true
reportUnnecessaryCast = true
reportUnnecessaryContains = true
reportUnnecessaryTypeIgnoreComment = true
reportUnsupportedDunderAll = true
reportUntypedClassDecorator = true
reportUntypedNamedTuple = true
reportUnusedClass = true
reportUnusedCoroutine = true
reportUnusedExcept = true
reportUnusedExpression = true
reportUnusedImport = true
reportUnusedVariable = true
reportWildcardImportFromLibrary = true

# Should switch to true when possible
reportDeprecated = false  # 1 error

# Can be enabled by generating type stubs for modules via pyright CLI
reportMissingTypeStubs = false

# Bad rules
# These are sorted alphabetically and should be enabled and moved to compliant rules section when resolved.
reportArgumentType = false  # 77 errors
reportAssignmentType = false  # 1 error
reportAttributeAccessIssue = false  # ConfigObj attribute access
reportCallInDefaultInitializer = false  # 3 errors
reportCallIssue = false  # 35 errors
reportImplicitOverride = false  # Some methods override abstract or base class methods
reportImplicitStringConcatenation = false  # Long text split into multiple lines to keep them under line length limit
reportImportCycles = false  # 6 errors
reportIncompatibleVariableOverride = false  # ConfigObj is a mutable mapping
reportIndexIssue = false  # ConfigObj is a mapping
reportMissingImports = false  # wxPython and NVDA Core modules
reportMissingParameterType = false  # 238 errors
reportMissingTypeArgument = false  # collections.ChainMap is a mapping
reportOperatorIssue = false  # 3 errors
reportOptionalMemberAccess = false  # Objects een as None when in fact they can be instantiated
reportOptionalOperand = false  # 3 errors
reportOptionalSubscript = false  # 165 errors
reportPossiblyUnboundVariable = false  # 8 errors
reportPrivateUsage = false  # 25 errors
reportUndefinedVariable = false  # 369 errors
reportUnknownArgumentType = false  #258 errors
reportUnknownLambdaType = false  # 2 errors
reportUnknownMemberType = false  # 2854 errors
reportUnknownParameterType = false  # 271 errors
reportUnknownVariableType = false  # 552 errors
reportUnnecessaryComparison = false  # 2 errors
reportUnnecessaryIsInstance = false  # 10 errors
reportUntypedBaseClass = false  # 34 errors
reportUntypedFunctionDecorator = false  # 64 errors
reportUnusedCallResult = false  # Functions returning somehting but not needed (notably Studio API calls)
reportUnusedFunction = false  # 1 error

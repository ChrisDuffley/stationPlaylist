# StationPlaylist #

* Авторы: Christopher Duffley <nvda@chrisduffley.com> (прежде Joseph Lee
  <joseph.lee22590@gmail.com>, первоначально автор Geoff Shang и другие
  участники)

Этот пакет дополнения обеспечивает улучшенное использование StationPlaylist
Studio и других приложений StationPlaylist, а также предоставляет утилиты
для управления Studio из любого места. Поддерживаемые приложения включают
Studio, Creator, Track Tool, VT Recorder и Streamer, а также кодеры SAM, SPL
и AltaCast.

Для получения подробной информации о дополнении прочтите [руководство по
дополнению][1].

ВАЖНЫЕ ПРИМЕЧАНИЯ:

* Для этого дополнения требуется StationPlaylist suite версии 5.50 или выше.
* Некоторые дополнительные функции будут отключены или ограничены, если NVDA
  запущена в защищённом режиме, например, на экране входа в систему.
* Для лучшего восприятия отключите режим приглушения аудио.
* Начиная с 2018 года, [списки изменений для старых версий дополнений][2]
  будут доступны на GitHub. В readme этого дополнения будут перечислены
  изменения, начиная с версии 23.02 (2023) и далее.
* Во время работы Studio вы можете сохранить, перезагрузить сохранённые
  настройки или сбросить настройки дополнения до значений по умолчанию,
  нажав Control+NVDA+C, Control+NVDA+R один раз или Control+NVDA+R три раза
  соответственно. Это также применимо к настройкам энкодера - вы можете
  сохранять и сбрасывать (не перезагружать) настройки энкодера, если
  используете энкодеры.
* Многие команды будут выводить речь, когда NVDA находится в режиме речи по
  требованию (NVDA 2024.1 и выше).

## Сочетания клавиш

Большинство из них будут работать только в Studio, если не указано
иное. Если не указано иное, эти команды поддерживают режим речи по
требованию.

* Alt+Shift+T из окна Studio: объявляет прошедшее время текущей
  воспроизводимой дорожки.
* Control+Alt+T (пролистать двумя пальцами вниз в сенсорном режиме SPL) из
  окна Studio: объявить оставшееся время воспроизводимой в данный момент
  дорожки.
* NVDA+Shift+F12 (пролистывание двумя пальцами вверх в сенсорном режиме SPL)
  из окна Studio: объявляет время вещания, например, за 5 минут до начала
  часа. При двойном нажатии этой команды будут объявлены минуты и секунды до
  начала часа.
* Alt+NVDA+1 (пролистывание двумя пальцами вправо в режиме SPL) из окна
  Studio: открывает категорию сигналов тревоги в диалоге конфигурации
  дополнения Studio (не поддерживает речь по требованию).
* Alt+NVDA+1 из редактора playlist Creator и редактора playlist Remote VT:
  объявляет запланированное время для загруженного списка воспроизведения.
* Alt+NVDA+2 из Creator's Playlist Editor и Remote VT playlist editor:
  Объявляет общую продолжительность списка воспроизведения.
* Alt+NVDA+3 из окна Studio: Включает проводник корзины для изучения
  назначений корзины (не поддерживает речь по требованию).
* Alt+NVDA+3 из редактора плейлистов Creator и Remote VT редактора списков
  воспроизведения: Объявляет, когда выбранная дорожка запланирована к
  воспроизведению.
* Alt+NVDA+4 из редактора плейлистов Creator и редактора плейлистов Remote
  VT: объявляет ротацию и категорию, связанную с загруженным списком
  воспроизведения.
* Control+NVDA+f из окна Studio: Открывает диалог поиска дорожки по
  исполнителю или названию песни. Нажмите NVDA+F3 для поиска вперёд, или
  NVDA+Shift+F3 для поиска назад (не поддерживается речь по требованию).
* Shift+NVDA+R из окна Studio: настройки пошаговых объявлений сканирования
  библиотеки (не поддерживает речь по требованию).
* Control+Shift+X из окна Studio: пошаговое изменение настроек брайлевского
  таймера (не поддерживает речь по требованию).
* Control+Alt+стрелка влево/вправо (при фокусе на дорожке в Studio, Creator,
  Remote VT и Track Tool): переход к столбцу предыдущей/следующей дорожки
  (не поддерживает речь по требованию).
* Control+Alt+стрелка вверх/вниз (при фокусе на дорожке в Studio, Creator,
  Remote VT и Track Tool): переход к предыдущей/следующей дорожке и
  объявление определённых столбцов (не поддерживает речь по требованию).
* Control+NVDA+1-0 (при фокусе на дорожке в Studio, Creator (включая
  редактор списков воспроизведения), Remote VT и Track Tool): объявить
  содержимое столбца для указанного столбца (первые десять столбцов по
  умолчанию). Двойное нажатие этой команды отобразит информацию о столбце в
  окне режима обзора.
* Control+NVDA+- (дефис при фокусе на дорожке в Studio, Creator, Remote VT и
  Track Tool): объявление данных для всех столбцов дорожки в окне режима
  обзора (не поддерживает речь по требованию).
* NVDA+V при фокусировке на дорожке (только для просмотрщика списков
  воспроизведения Studio): переключает объявление в столбце дорожки между
  порядком экрана и пользовательским порядком (не поддерживает речь по
  требованию).
* Alt+NVDA+C при фокусировке на дорожке (только для просмотрщика списков
  воспроизведения Studio): объявляет комментарии к дорожке, если таковые
  имеются.
* Alt+NVDA+0 из окна studio: Открывает диалог настройки дополнения Studio
  (не поддерживает речь по требованию).
* Alt+NVDA+P из окна Studio: открывает диалог профилей вещания Studio (не
  поддерживает речь по требованию).
* Alt+NVDA+F1: Открыть диалог приветствия (не поддерживает речь по
  требованию).

## Неназначенные команды

Следующие команды по умолчанию не назначены; если вы хотите их назначить,
используйте диалог жестов ввода для добавления пользовательских команд. Для
этого в окне Studio откройте меню NVDA, Параметры, затем жесты
ввода. Разверните категорию StationPlaylist, затем найдите неназначенные
команды в списке ниже и выберите "Добавить", затем введите жест, который вы
хотите использовать.

Важно: некоторые из этих команд не будут работать, если NVDA запущен в
безопасном режиме, например, с экрана входа в систему. Не все команды
поддерживают режим речи по требованию.

* Переключение в окно SPL Studio из любой программы (недоступно в безопасном
  режиме, не поддерживает речь по требованию).
* Уровень панели управления SPL (недоступен в безопасном режиме).
* Объявление состояния студии, например, о воспроизведении дорожек из других
  программ (недоступно в безопасном режиме).
* Оповещение о состоянии подключения кодировщика из любой программы
  (недоступно в безопасном режиме).
* Уровень Помощника SPL для SPL Studio.
* Объявлять время в SPL Studio, включая секунды.
* Объявляет температуру.
* Объявлять название следующей дорожки, если она запланирована.
* Объявлять название проигрываемой в данный момент дорожки.
* Пометка текущей дорожки для начала анализа времени дорожки.
* Выполнение анализа времени дорожки.
* Делать снимки списка воспроизведения.
* Поиск текста в определённых столбцах (не поддерживает речь по требованию).
* Искать дорожки с длительностью заданного диапазона с помощью функции
  поиска по времени (не поддерживает речь по требованию).
* Быстрое включение или отключение потоковой передачи метаданных (не
  поддерживает речь по требованию).

## Дополнительные команды при использовании кодировщиков

При использовании кодировщиков доступны следующие команды, а те, которые
используются для переключения параметров поведения при подключении, таких
как фокус на Studio, воспроизведение первой дорожки и переключение фонового
мониторинга, могут быть назначены в диалоге жестов ввода в меню NVDA,
Параметры, жесты ввода, в категории StationPlaylist. Эти команды не
поддерживают речь по требованию.

* F9: подключить выбранный кодировщик.
* F10 (только кодировщик SAM): Отключить выбранный кодировщик.
* Control+F9: Подключить все кодировщики.
* Control+F10 (только кодировщик SAM): Отключить все кодировщики.
* Control+Shift+F11: Включает, будет ли NVDA переключаться на окно Studio
  для выбранного кодировщика, если он подключен.
* Shift+F11: включает, будет ли Studio воспроизводить первую выбранную
  дорожку, когда кодер подключен к потоковому серверу.
* Control+F11: включает фоновый мониторинг выбранного кодировщика.
* Control+F12: открывает диалог для выбора удалённого кодировщика (чтобы
  изменить метки и настройки кодировщика).
* Alt+NVDA+0 или F12: открывает диалог настроек кодировщика для настройки
  таких параметров, как метка кодера.

Кроме того, доступны команды просмотра столбцов, в том числе (поддержка речи
по требованию):

* Control+NVDA+1: Положение кодировщика.
* Control+NVDA+2: метка кодировщика.
* Control+NVDA+3 от SAM-кодировщика: Формат кодировщика.
* Control+NVDA+3 из SPL и AltaCast Encoder: настройки кодировщика.
* Control+NVDA+4 из SAM Encoder: состояние подключения кодировщика.
* Control+NVDA+4 от SPL и AltaCast Encoder: скорость передачи или состояние
  соединения.
* Control+NVDA+5 от SAM Encoder: Описание состояния соединения.

## Уровень Помощника SPL

Набор команд этого уровня позволяет вам получать различные состояния в SPL
Studio, такие как, воспроизводится ли дорожка, общая продолжительность всех
дорожек в течение часа и так далее. В любом окне SPL Studio нажмите команду
уровня помощника SPL, затем нажмите одну из клавиш из списка ниже (одна или
несколько команд доступны только для просмотра списков воспроизведения). Вы
также можете настроить NVDA на эмуляцию команд из других программ для чтения
с экрана.

Доступны следующие команды (большинство команд поддерживают речь по
требованию):

* A: Автоматизация.
* C (Shift+C в раскладке JAWS): Название проигрываемой в данный момент
  дорожки.
* C (раскладка JAWS): Переключить проводник корзины (только для просмотрщика
  списков воспроизведения, не поддерживает речь по требованию).
* D (R в раскладке JAWS): Оставшаяся продолжительность списка
  воспроизведения (если отображается сообщение об ошибке, перейдите к
  просмотрщику списка воспроизведения и затем введите эту команду).
* Control+D (Studio 6.10 и выше): Клавиши управления включены/выключены.
* E: Состояние потоковой передачи метаданных.
* Shift+1 - Shift+4, Shift+0: состояние отдельных URL-адресов потоковой
  передачи метаданных (0 — для кодера DSP).
* F: Найти дорожку (только для просмотрщика списков воспроизведения, не
  поддерживает речь по требованию).
* H: Продолжительность музыки для текущего часового интервала.
* Shift+H: Оставшаяся продолжительность дорожки для часового интервала.
* I (L в раскладке JAWS): Количество слушателей.
* K: Перейти к отмеченной дорожке (только для просмотрщика списков
  воспроизведения).
* Control+K: Установить текущую дорожку в качестве дорожки метки места
  (только для просмотрщика списков воспроизведения).
* L (Shift+L в раскладке JAWS): Линейный вход.
* M: Микрофон.
* N: Название следующей запланированной дорожки.
* O: час списка воспроизведения более/под.
* P: Состояние воспроизведения (играет или остановлено).
* Shift+P: Высота текущей дорожки.
* R (Shift+E в раскладке JAWS): Запись в файл включена/отключена.
* Shift+R: Мониторинг сканирования библиотеки.
* S: Начало дорожки (по расписанию).
* Shift+S: Время до начала воспроизведения выбранной дорожки (дорожка
  начинается).
* T: Режим редактирования/вставки корзины вкл/выкл.
* U: Время работы Studio.
* W: Погода и температура, если настроено.
* Y: Состояние изменения списка воспроизведения.
* F8: Сделать снимки списка воспроизведения (количество дорожек, самая
  длинная дорожка и т. д.).
* Shift+F8: Запросить расшифровки списков воспроизведения в различных
  форматах.
* F9: Отметить текущую дорожку для начала анализа списка воспроизведения
  (только для просмотрщика списков воспроизведения).
* F10: Выполнить анализ времени дорожки (только для просмотрщика списков
  воспроизведения).
* F12: Переключение между текущим и предопределённым профилем.
* F1: Справка по уровню.

## Панель управления SPL

Панель управления SPL - это набор многоуровневых команд, которые вы можете
использовать для управления SPL Studio в любом месте. Нажмите команду уровня
панели управления SPL, и NVDA выдаст сообщение "Панель управления
SPL". Нажмите другую команду для управления различными студийными
настройками, такими как включение/ выключение микрофона или воспроизведение
следующего трека.

Важно: команды уровня панели управления SPL отключены, если NVDA запущен в
защищенном режиме.

Доступны следующие команды панели управления SPL (некоторые команды
поддерживают речь по требованию):

* P: Воспроизвести следующую выбранную дорожку.
* U: Приостановить или возобновить воспроизведение.
* S: Остановить дорожку с затуханием.
* T: Мгновенная остановка.
* M: Включить микрофон.
* Shift+M: Выключить микрофон.
* N: Включить микрофон без затухания.
* A: Включить автоматику.
* Shift+A: Отключить автоматику.
* L: Включить линейный вход.
* Shift+L: Отключить линейный вход.
* R: Оставшееся время для воспроизводимой в данный момент дорожки.
* Shift+R: Ход сканирования библиотеки.
* C: Название и продолжительность воспроизводимой в данный момент дорожки
  (поддерживается речь по требованию).
* Shift+C: Название и длительность предстоящей дорожки, если есть
  (поддерживается речь по требованию).
* E: Состояние подключения кодировщика (поддерживается речь по требованию).
* I: Количество слушателей (поддерживает речь по требованию).
* Q: Информация о состоянии студии, например, воспроизводится ли дорожка,
  включен ли микрофон и другие данные (поддерживается речь по требованию).
* Клавиши корзины (F1, Control+1, например): Воспроизвести назначенные
  корзины из любого места.
* H: Справка по уровню.

## Сигнализация дорожки и микрофона

По умолчанию NVDA воспроизводит звуковой сигнал, если до конца дорожки
(окончание) и/или вступления осталось пять секунд, а также если микрофон был
активен в течение некоторого времени. Чтобы настроить звуковые сигналы
дорожки и микрофона, нажмите Alt+NVDA+1, чтобы открыть настройки звуковых
сигналов на экране настроек дополнения Studio. Вы также можете использовать
этот экран для настройки того, будет ли слышен звуковой сигнал, сообщение
или и то, и другое вместе при включении звуковых сигналов.

## Поисковик Дорожек

Если вы хотите быстро найти песню по исполнителю или по названию песни в
списке композиций, нажмите Control+NVDA+F. Введите или выберите имя
исполнителя или название песни. NVDA либо направит вас к нужной песне, если
она будет найдена, либо выдаст сообщение об ошибке, если не удастся найти
нужную песню. Чтобы найти ранее введенную песню или исполнителя, нажмите
NVDA+F3 или NVDA+Shift+F3, чтобы перейти вперед или назад.

Примечание: Функция поиска дорожек чувствительна к регистру.

## Обозреватель корзин

В зависимости от редакции SPL Studio позволяет назначить для воспроизведения
до 96 корзин. NVDA позволяет вам услышать, какая корзина или джингл
назначена этим командам.

Чтобы узнать назначения корзин в SPL Studio, нажмите Alt+NVDA+3. Нажав
команду корзины один раз, вы узнаете, какой джингл назначен этой
команде. Двойное нажатие команды корзины приведёт к воспроизведению
джингла. Нажмите Alt+NVDA+3, чтобы выйти из обозревателя
корзины. Дополнительную информацию о корзине см. в руководстве по
дополнению.

## Анализ времени дорожки

Чтобы получить продолжительность воспроизведения выбранных дорожек, отметьте
текущую дорожку для начала анализа времени дорожки (Помощник SPL, F9), затем
нажмите помощник SPL, F10, когда достигнете конца выделения.

## Обозреватель Столбцов

Нажимая клавиши Control+NVDA+1–0, вы можете получить содержимое определённых
столбцов. По умолчанию это первые десять столбцов для элемента дорожки (в
Studio: исполнитель, название, продолжительность, вступление, завершение,
категория, год, альбом, жанр, настроение). Для редактора списков
воспроизведения в клиенте Creator и Remote VT данные столбцов зависят от
порядка столбцов, как показано на экране. В Studio, основном списке дорожек
Creator и инструменте отслеживания слоты столбцов предварительно заданы
независимо от порядка столбцов на экране и могут быть настроены в диалоге
настроек дополнения в категории обозревателя столбцов.

## Объявление столбца дорожки

Вы можете попросить NVDA объявлять столбцы дорожек, найденные в просмотрщике
списков воспроизведения Studio, в том порядке, в котором они появляются на
экране, или использовать собственный порядок и/или исключить определённые
столбцы. Нажмите NVDA+V, чтобы переключить это поведение, сосредоточившись
на дорожке в просмотрщике списков воспроизведения Studio. Чтобы настроить
включение и порядок столбцов, на панели настроек объявления столбцов в
настройках дополнения снимите флажок "Использовать порядок отображения на
экране при объявлении столбцов дорожки", а затем настройте включенные
столбцы и/или порядок столбцов.

## Снимки списков воспроизведения

Вы можете нажать помощника SPL, F8, сосредоточившись на списке
воспроизведения в Studio, чтобы получить различную статистику о списке
воспроизведения, включая количество дорожек в списке воспроизведения, самую
длинную дорожку, лучших исполнителей и т. д. После назначения
пользовательской команды для этой функции, двойное нажатие пользовательской
команды приведёт к тому, что NVDA представит информацию о снимке списка
воспроизведения в виде веб-страницы, чтобы вы могли использовать режим
обзора для навигации (нажмите escape для закрытия).

## Расшифровка списков воспроизведения

Нажатие сочетания клавиш помощника SPL, Shift+F8, откроет диалог,
позволяющий запросить расшифровки списка воспроизведения в различных
форматах, в том числе в текстовом формате, таблице HTML или списке.

## Диалог настройки

В окне studio вы можете нажать Alt+NVDA+0, чтобы открыть диалог настройки
дополнения. В качестве альтернативы, перейдите в меню параметров NVDA и
выберите пункт Настройки SPL Studio. Не все настройки доступны, если NVDA
запущен в безопасном режиме.

## Диалог профилей вещания

Вы можете сохранить настройки для определённых шоу в профилях вещания. Этими
профилями можно управлять с помощью диалогового окна SPL broadcast profiles,
доступ к которому можно получить, нажав Alt+NVDA+P в окне студии.

## Сенсорный режим SPL

Если вы используете Studio на компьютере с сенсорным экраном и установленной
NVDA, вы можете выполнять некоторые команды Studio с сенсорного
экрана. Сначала коснитесь тремя пальцами, чтобы переключиться в режим SPL,
затем используйте сенсорные команды, перечисленные выше, для выполнения
команд.

## Версия 25.06-LTS

Версия 25.06.x - это последняя серия выпусков для поддержки Studio 5.x,
будущие выпуски потребуют Studio 6.x. При необходимости некоторые новые
функции будут внесены в 25.06.x.

* NVDA больше не забудет передавать профили вещания при обновлении
  дополнения (исправление регрессии, представленной в 25.05).
* Добавлена новая команда в помощник SPL, чтобы объявить о часе списка
  воспроизведения в течение/младше в минутах и секундах (O).
* В Studio команда для прохождения настройки объявления библиотеки
  изменилась с ALT+NVDA+R на Shift+NVDA+R, поскольку бывшая команда
  переключает удалённый доступ в NVDA 2025.1.
* NVDA больше не будет воспроизводить сигналы ошибок или ничего не делать
  при выполнении некоторых команд помощника SPL после изменения размера окна
  Studio.
* Пользовательский интерфейс подтверждения удаления профилей вещания теперь
  напоминает интерфейс удаления профиля конфигурации NVDA.
* NVDA распознаёт изменения столбца дорожки, представленные в Creator и
  Track Tool 6.11.
* В обозревателе столбцов для Creator столбец "Date Restriction" теперь
  "Restrictions".
* NVDA больше не будет играть неправильные корзины при их игре через слой
  контроллера SPL.

## Версия 25.05

* NVDA 2024.1 или позже требуется из -за обновления Python 3.11.
* Восстановлена ​​ограниченная поддержка для Windows 8.1.
* Перенесены обучающие документы дополнения, такие как дополнение к
  ChangeLog в репозиторий основного кода.
* Добавлена кнопка "Закрыть" к моментальным снимкам списка воспроизведения,
  расшифровкам  списка воспроизведения и справочным экранам справочников
  помощника SPL и контроллера (NVDA 2025.1 и позже).
* NVDA больше не будет ничего не делать или играть звук ошибки при
  объявлении информации о погоде и температуре в Studio 6.x (помощник SPL,
  W).

## Версия 25.01

* Требуется Windows 10 21H2 (сборка 19044) или выше.
* Ссылки для скачивания выпусков дополнений больше не включены в
  документацию дополнений. Вы можете загрузить дополнение из магазина
  дополнений NV Access.
* Инструмент линтинга переключен с Flake8 на Ruff и переформатирован модуль
  дополнения для лучшего соответствия стандартам кодирования NVDA.
* Удалена поддержка функции автоматического обновления дополнений из
  дополнения Add-on Updater.
* В Studio 6.10 и выше, добавлена новая команда в помощник SPL для
  включения/отключения объявления клавиш управления (Control+D).

## Версия 24.03

* Совместимо с NVDA 2024.1.
* Требуется NVDA 2023.3.3 или выше.
* Поддержка пакета StationPlaylist suite 6.10.
* Большинство команд поддерживают речь по требованию (NVDA 2024.1), поэтому
  объявления можно озвучивать в этом режиме.

## Версия 24.01

* Команды диалога настроек кодировщика для использования с кодировщиками SPL
  и SAM теперь доступны для назначения, что означает, что вы можете изменить
  их по умолчанию в категории StationPlaylist в меню NVDA > Настройки >
  Жесты ввода. Команды, которые нельзя назначить, - это команды подключения
  и отключения. Кроме того, чтобы предотвратить конфликты команд и упростить
  использование этой команды на удалённых серверах, жест по умолчанию для
  переключения в Studio после подключения теперь Control+Shift+F11 (ранее
  просто F11). Всё это, конечно, по-прежнему можно переключать в диалоге
  настроек кодировщика (NVDA+Alt+0 или F12).

## Версия 23.05

* Чтобы отразить смену сопровождающего, манифест был обновлён и указан как
  таковой.

## Версия 23.02

* Требуется NVDA 2022.4 или выше.
* Требуется Windows 10 21H2 (обновление от ноября 2021 года/сборка 19044)
  или выше.
* В программе просмотра плейлистов Studio NVDA не будет объявлять заголовки
  столбцов, такие как исполнитель и название, если для параметра заголовки
  таблиц установлено значение "строки и столбцы" или "столбцы" на панели
  настроек форматирования документов NVDA.

## Старые выпуски

Пожалуйста, ознакомьтесь с [списком изменений][2] для получения информации о
старых выпусках дополнения.

[1]:
https://github.com/ChrisDuffley/stationPlaylist/blob/main/addonuserguide.md

[2]: https://github.com/ChrisDuffley/stationPlaylist/blob/main/changes.md
